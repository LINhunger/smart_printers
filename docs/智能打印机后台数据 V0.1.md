# 智能打印机后台数据 V0.1

标签（空格分隔）： QG项目

---

终端是分为 打印机，Web，app。Web 和 App 与 服务器的交互基于 HTTP 协议；打印机与服务器的交互基于Tcp 协议（长连接）

> 关于长连接占用服务器资源问题暂不考虑。

## 服务器-打印机 （双向通信）

### 服务器到打印机

1. 批次订单
2. 单次订单
3. 智能分发管理 （计时 与 内存）
4. 加急订单 

**问题**
>  1. 如何区分加急订单与普通订单
>  2. 加急订单也是区分批次订单与单次订单吗？
>  3. 向打印机发送数据的前提条件是：打印机的内存容量需要多大呢？

-----------
**对异常情况的处理**

1.  打印机异常
    * 打印机无法发送数据：订单状态未知
    * 打印机发送异常数据：订单状态明确错误
> 处理方式：

2.  服务器异常
    * 打印机发送数据，服务器内部错误
    * 打印机发送数据，服务器连接关闭
> 处理方式：

3. 异常处理：记录异常情况，对于异常订单，再由客户主动向服务器请求

### 打印机到服务器

1. 订单打印状态  （打印完成，等待中，打印失败）
2. 打印机当前状态（性能良好，性能较差）
3. 打印机内存状态 

**问题**
> 1. 这些状态并不具体。需要具体化，或者半具体化。

## 服务器-Web

1. 获取订单数据
2. 增加加急订单
3. logo设定

4. 本地下单 （无网络状态）
5. 对异常订单的处理
    * 重新向服务器发送打印订单的请求
    * 直接将异常订单数据使用本地打印功能

## 服务器-app


## 本地-打印机 （串口通信）






